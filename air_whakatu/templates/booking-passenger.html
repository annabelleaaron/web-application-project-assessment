{% extends "layout.html" %}
{% block title %}
Air WhakatÅ« - Change details
{% endblock %}
{% block content %}
<section class="h-100 h-custom gradient-custom-2">
    <div class="container py-1 h-100">
      <div class="row d-flex justify-content-center align-items-center h-100">
        <div class="col-12">
          <div class="card" style="border-radius: 15px;">
            <div class="card-body p-0">
              <div class="row g-0">
                  <div class="p-5">
                    <form class="needs-validation" novalidate action="{{ url_for('passengerUpdate')}}" method="POST">
                        <h3 class="fw-normal mb-3">Change details</h3>
  
                        <div class="row">
                            {% if customerdetails %} 
                            <input type="hidden" name="passenger-id" id="passenger-id" value="{{customerdetails[0]}}" /> 
                            {% endif %}
                            <div class="row">
                                <div class="col-md-3 mb-2 pb-2">
                                    <div class="form-outline">
                                        <label class="form-label" for="update-first-name">First name</label>
                                        <input type="text" name="update-first-name" id="update-first-name" placeholder="John" required class="form-control form-control-lg" {% if customerdetails %} value="{{customerdetails[1]}}" {% endif %}/>
                                        <div class="invalid-feedback">
                                            Please enter your first name.
                                        </div>
                                    </div>
                                </div>

                                <div class="col-md-3 mb-2 pb-2">
                                    <div class="form-outline">
                                        <label class="form-label" for="update-last-name">Last name</label>
                                        <input type="text" name="update-last-name" id="update-last-name" placeholder="Smith" required class="form-control form-control-lg" {% if customerdetails %} value="{{customerdetails[2]}}" {% endif %}/>
                                        <div class="invalid-feedback">
                                            Please enter your last name.
                                        </div>
                                    </div>
                                </div>

                                <div class="form-outline form-white col-md-6 mb-2 pb-2">
                                    <label class="form-label" for="update-email-address">Email Address</label>
                                    <input type="email" name="update-email-address" id="update-email-address" placeholder="johnsmith@email.com" required class="form-control form-control-lg" {% if customerdetails %} value="{{customerdetails[3]}}" {% endif %}/>
                                    <div class="invalid-feedback">
                                        Please enter a valid email address.
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="form-outline form-white col-md-4 mb-2 pb-2">
                                    <label class="form-label" for="update-phone-number">Phone Number</label>
                                    <input type="tel" name="update-phone-number" id="update-phone-number" placeholder="(01x) 345-6789" pattern="[(][0-9]{2-3}[)]\s[0-9]{3}-[0-9]{4}" required class="form-control form-control-lg" {% if customerdetails %} value="{{customerdetails[4]}}" {% endif %}/>
                                    <div class="invalid-feedback">
                                        Please enter valid phone number.
                                    </div>
                                </div>
                                
                                <div class="form-outline form-white col-md-4 mb-2 pb-2">
                                    <label class="form-label" for="update-passport-number">Passport Number</label>
                                    <input name="update-passport-number" id="update-passport-number" required class="form-control form-control-lg" {% if customerdetails %} value="{{customerdetails[5]}}" {% endif %}/>
                                    <div class="invalid-feedback">
                                        Please enter a passport number.
                                    </div>
                                </div>

                                <div class="form-outline form-white col-md-4 mb-2 pb-2">
                                    <label class="form-label" for="update-date-of-birth">Date Of Birth</label>
                                    <input type="date" name="update-date-of-birth" id="update-date-of-birth" required class="form-control form-control-lg" {% if customerdetails %} value="{{customerdetails[6]}}" {% endif %}/>
                                    <div class="invalid-feedback">
                                        Please enter a date of birth.
                                    </div>
                                </div>
                            </div>
                        </div>
                        {% if updated %}
                            <p class="text-success">Successfully updated.</p>
                        {% endif %}
                        <button type="submit" name="update-submit" id="update-submit" class="btn btn-light btn-lg"
                            data-mdb-ripple-color="dark">Submit changes</button>
                    </form>
                    
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
</section>

<!--Script for disabling form submissions if there are invalid fields-->
<script>
    (function () {
        'use strict'

        // Fetch all the forms we want to apply custom Bootstrap validation styles to
        var forms = document.querySelectorAll('.needs-validation')

        // Loop over them and prevent submission
        Array.prototype.slice.call(forms)
            .forEach(function (form) {
            form.addEventListener('submit', function (event) {
                if (!form.checkValidity()) {
                event.preventDefault()
                event.stopPropagation()
                }

                form.classList.add('was-validated')
            }, false)
            })
    })()
</script>
{% endblock %}